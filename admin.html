<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css'>
  <title>admin | Worship UNAI</title>
  <link rel="shortcut icon" href="https://unai.edu/wp-content/uploads/2017/06/favicon.png" />
</head>

<body>
  <div class="container-fluid">
    <div class="row flex-nowrap">
      <div class="col-auto col-md-3 col-xl-2 px-sm-2 px-0 bg-dark ">
        <div class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 text-white min-vh-100">

          <a href="/" class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-white text-decoration-none">
            <span class="fs-5 d-none d-sm-inline ">GMAHK UNAI</span>
          </a>
          <a href="admin.html" class="d-flex align-items-center text-white text-decoration-none" id="dropdownUser1"
            data-bs-toggle="dropdown" aria-expanded="false">
            <img src="myphoto.jpg" alt="hugenerd" width="30" height="30" class="rounded-circle">
            <span class="d-none d-sm-inline mx-1" style="font-size: 20px; font-weight: bold;">Juwita</span>

          </a>
          <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start  id=" menu">
            <li class="nav-item">
              <a href="index.html" class="nav-link align-middle px-0 ">
                <i class="fs-4 bi-house"></i> <span class="ms-1 d-none d-sm-inline">Home</span>
              </a>
            </li>
            <li>
              <a href="kebaktian.html" class="nav-link px-0 align-middle">
                <i class="fs-4 bi-speedometer2"></i> <span class="ms-1 d-none d-sm-inline">Kebaktian</span> </a>

            </li>
            <li>
              <a href="permintaan.html" class="nav-link px-0 align-middle">
                <i class="fs-4 bi-table"></i> <span class="ms-1 d-none d-sm-inline">Permintaan</span></a>
            </li>
            <li>
              <a href="pembatalan.html" class="nav-link px-0 align-middle">
                <i class="fs-4 bi-dash-circle"></i> <span class="ms-1 d-none d-sm-inline">Pembatalan</span></a>
            </li>
            <li>

          </ul>
          <hr>

          <div class="dropdown pb-4 fixed-bottom">
            <a href="#" class="d-flex align-items-center text-white text-decoration-none " data-bs-toggle="modal"
              data-bs-target="#createUserModalCenter" id="dropdownUser1" data-bs-toggle="dropdown"
              aria-expanded="false">
              <i class="fs-4 bi-cloud-check "></i>
              <span class="d-none d-sm-inline mx-1">Tambahkan Data</span>

            </a>
            <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle"
              id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
              <img src="myphoto.jpg" alt="hugenerd" width="30" height="30" class="rounded-circle">
              <span class="d-none d-sm-inline mx-1">Juwita</span>

            </a>


            <ul class="dropdown-menu dropdown-menu-dark text-small shadow">
              <li><a class="dropdown-item" href="#">New project...</a></li>
              <li><a class="dropdown-item" href="admin.html">To Admin</a></li>
              <li><a class="dropdown-item" href="#">Profile</a></li>
              <li>
                <hr class="dropdown-divider">
              </li>
              <li><a class="dropdown-item" href="index.html">Sign out</a></li>
            </ul>

          </div>

        </div>
      </div>
      <div class="col py-3">
        <div id="app" class="container">

          <div class="container mt-3">

          </div>
          <!-- The Modal -->
          <div class="modal fade" id="createUserModalCenter" tabindex="-1" role="dialog"
            aria-labelledby="createUserModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="createUserModalLongTitle">Silahkan Isi Data</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                  <form>
                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="nama">Nama</label>
                        <input v-model="nama" type="text" class="form-control" id="nama" placeholder="" value=""
                          required>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="email">Email</label>
                      <div class="input-group">
                        <input v-model="email" type="text" class="form-control" id="email" placeholder="" required>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="telepon">Telepon</label>
                      <div class="input-group">
                        <input v-model="telepon" type="text" class="form-control" id="telepon" placeholder="telepon"
                          required>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="username">Username</label>
                      <div class="input-group">
                        <input v-model="username" type="text" class="form-control" id="username" placeholder=""
                          required>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="password">Password</label>
                      <div class="input-group">
                        <input v-model="password" type="text" class="form-control" id="password" placeholder=""
                          required>
                      </div>
                    </div>
                  </form>
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                  <button type="submit" class="btn btn-primary" data-bs-dismiss="modal"
                    v-on:click="createUser">Submit</button>
                  <button type="button" class="btn btn-dark" data-bs-dismiss="modal">Close</button>

                </div>

              </div>
            </div>
          </div>



          <!-- Modal update -->
          <div class="modal fade" id="updateUserModalCenter" tabindex="-1" aria-labelledby="updateUserModalCenterTitle"
            aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="updateUserModalCenterTitle">Silahkan Update Data</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <form>
                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="nama">Nama</label>
                        <input v-model="nama" type="text" class="form-control" id="namaUpdate" placeholder="" value=""
                          required>
                      </div>
                    </div>

                    <div class="mb-3">
                      <label for="email">Email</label>
                      <div class="input-group">
                        <input v-model="email" type="text" class="form-control" id="emailUpdate" placeholder=""
                          required>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="telepon">Telepon</label>
                      <div class="input-group">
                        <input v-model="telepon" type="text" class="form-control" id="teleponUpdate" placeholder=""
                          required>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="username">Username</label>
                      <div class="input-group">
                        <input v-model="username" type="text" class="form-control" id="usernameUpdate" placeholder=""
                          required>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="password">Password</label>
                      <div class="input-group">
                        <input v-model="password" type="text" class="form-control" id="passwordUpdate" placeholder=""
                          required>
                      </div>
                    </div>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="submit" class="btn btn-primary" data-bs-dismiss="modal"
                    v-on:click="updateUser(user)">Update</button>
                  <button type="button" class="btn btn-dark" data-bs-dismiss="modal">Close</button>


                </div>
              </div>
            </div>
          </div>

          <!-- Button trigger modal -->


          <!-- Modal -->
          <div class="modal fade" id="deleteUserModalCenter" tabindex="-1" aria-labelledby="deleteUserModalCenterTitle"
            aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="deleteUserModalCenterTitle">Delete</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  Apakah anda yakin Menghapus Data
                </div>
                <div class="modal-footer">
                  <button type="submit" class="btn btn-primary" data-bs-dismiss="modal"
                    v-on:click="deleteUser">Yes</button>
                  <button type="button" class="btn btn-dark" data-bs-dismiss="modal">No</button>
                </div>
              </div>
            </div>
          </div>


          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createUserModalCenter">
            <i class="fs-4 bi-dpad "></i> Tambahkan Data
          </button>
          <div class="container">
            <div class="col-md-12">
              <br>
              <table class="table table-striped">
                <tr style="background-color: rgb(133, 127, 255);">
                  <th>ID</th>
                  <th>Nama</th>
                  <th>Email</th>
                  <th>Telepon</th>
                  <th>Username</th>
                  <th>Password</th>
                  <th>Edit</th>
                  <th>Delete</th>
                </tr>
                <tr v-for="user in users">
                  <td>{{ user.id }}</td>
                  <td>{{ user.nama }}</td>
                  <td>{{ user.email }}</td>
                  <td>{{ user.telepon }}</td>
                  <td>{{ user.username }}</td>
                  <th>{{ user.password}}</th>

                  <td><button class="btn btn-md btn-primary " data-bs-toggle="modal"
                      data-bs-target="#updateUserModalCenter" v-on:click="getEdit(user)">Edit</button></td>
                  <td><button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteUserModalCenter"
                      v-on:click="getDelete(user)">Delete </button></td>

              </table>

            </div>
          </div>

        </div>


        <!-- Axios -->
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

        <script>
          var app = new Vue({
            el: '#app',
            data: {
              errors: [],
              users: [],
              userIdEdit: null,
              userIdDelete: null,
              editMode: false,
              deleteMode: false,
              nama: '',
              email: '',
              telepon: '',
              username: '',
              password: '',
            },
            mounted: function () {
              this.getUser();
            },
            methods: {
              getUser() {
                axios.get('https://6215d500c9c6ebd3ce32e466.mockapi.io/admin')
                  .then(response => {
                    this.users = response.data;
                    console.log(response);
                  })
                  .catch(error => {
                    console.log(error);
                  });
              },
              createUser: function () {
                var createUserModalCenter = document.getElementById('createUserModalCenter')
                axios.post('https://6215d500c9c6ebd3ce32e466.mockapi.io/admin', {
                    nama: this.nama,
                    email: this.email,
                    telepon: this.telepon,
                    username: this.username,
                    password: this.password,
                  })
                  .then(response => {
                    this.getUser();
                    swal('created', 'Berhasil Menambah Data', 'success')
                    this.resetForm();
                    console.log(response);
                  })
                  .catch(error => {
                    console.log(error);
                  });

              },
              resetForm: function () {
                this.editMode = false;
                this.deleteMode = false;
                this.userIdEdit = null;
                this.nama = null;
                this.email = null;
                this.telepon = null;
                this.username = null;
                this.password = null;

              },

              getEdit: function (user) {
                var updateUserModalCenter = document.getElementById('updateUserModalCenter');
                this.message = null;
                this.editMode = true;
                this.deleteMode = false;
                this.userIdEdit = user.id;
                this.nama = user.nama;
                this.email = user.email;
                this.telepon = user.telepon;
                this.password = user.password;
                this.username = user.username;
              },
              getDelete: function (user) {
                //Show the delete modal
                var deleteUserModalCenter = document.getElementById('deleteUserModalCenter');
                this.message = null;
                this.deleteMode = true;
                this.editMode = false;
                this.userIdDelete = user.id;
                this.namaUpdate = user.nama;
                this.emailUpdate = user.email;
                this.teleponUpdate = user.telepon;
                this.usernameUpdate = user.username;
                this.passwordUpdate = user.password;
              },
              updateUser: function () {
                axios.put(`https://6215d500c9c6ebd3ce32e466.mockapi.io/admin/${this.userIdEdit}`, {
                    nama: this.nama,
                    email: this.email,
                    telepon: this.telepon,
                    username: this.username,
                    password: this.password,
                  })
                  .then(res => {
                    swal('updated', 'Berhasil Mengupdate Data', 'success')
                    var updateUserModalCenter = document.getElementById('updateUserModalCenter');
                    this.resetForm();
                    this.getUser();
                  })

                  .catch(err => {
                    console.log(err);
                  })
              },
              deleteUser: function () {
                axios.delete(`https://6215d500c9c6ebd3ce32e466.mockapi.io/admin/${this.userIdDelete}`)
                  .then(res => {
                    swal('deleted', 'Berhasil Menghapus Data')
                    var deleteUserModalCenter = document.getElementById('deleteUserModalCenter');
                    this.resetForm();
                    this.getUser();
                  })
                  .catch(err => {
                    console.log(err);
                  })
              }
            }
          })
        </script>

      </div>

    </div>

  </div>

</body>

</html>
